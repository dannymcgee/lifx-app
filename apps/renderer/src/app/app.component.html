<ng-container *ngIf="(groups$ | async) as groups">
<ng-container *ngIf="(bulbs$ | async) as bulbs">

<span *ngIf="loading">Loading...</span>

<section *ngFor="let group of groups">
	<h3>{{ group }}</h3>
	<ul>
		<li *ngFor="let bulb of bulbs[group]
				trackBy: trackById"
		>
			<strong>{{ bulb.name }}</strong>
			{{ $any(bulb.color)?.brightness | percent }}
			{{ $any(bulb.color)?.kelvin }}
			<em>Last seen {{
				bulb.lastSeen | date : 'HH:mm'
			}} ({{
				bulb.lastSeen | relative
			}})</em>
		</li>
	</ul>
</section>

</ng-container>
</ng-container>
